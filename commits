@Secured(roles = { ESFConstants.SYSPREF_VIEW_ACCESS })
@PostMapping(value = "getNamesByBrokerOpAccount", consumes = "application/json", produces = "application/json")
public List<String> getNamesByBrokerOpAccount(@RequestBody Long brokerNumId) throws Exception {
    if (brokerNumId == null || brokerNumId <= 0) {
        throw new Exception("Broker Number ID cannot be null or less than or equal to zero");
    }

    XREFDMLBrokerNum brokerNum = xrefDMLBrokerNumService.findById(brokerNumId);
    if (brokerNum == null) {
        throw new Exception("No broker found with the provided ID");
    }

    String brokerOpAccount = brokerNum.getBrokerOpAccount();
    List<String> names = eppService.getNamesByBrokerOpAccount(brokerOpAccount);

    if (names == null || names.isEmpty()) {
        throw new Exception("No names found for the provided Broker OP Account");
    }

    return names;
}